<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>Nuxt.jsè¸©å‘è®°ï¼Œåˆ©ç”¨Nuxtä¸€é”®ç”Ÿæˆå¤šé¡µé¢é™æ€ç«™ç‚¹ | é…·é…·å“’å°ç«™</title>

  <!-- keywords -->
  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="æœ¬æ–‡ç»“åˆå®é™…é¡¹ç›®åŸºäº `Nuxt.js@1.4.0` è¿›è¡Œè®²è§£ï¼Œéƒ¨åˆ†æ¡ˆä¾‹æ‘˜è‡ª Nuxt.js å®˜æ–¹æ–‡æ¡£ã€‚å¦‚éœ€è½¬è½½ï¼Œè¯·æ ‡æ˜å‡ºå¤„ã€‚  Nuxt.jsç®€å•ä»‹ç» ä¸ºä»€ä¹ˆä½¿ç”¨Nuxt.js? é¡¹ç›®åˆ›å»º é¡¹ç›®é…ç½® nuxt.config.jsæ€»è§ˆ è·¯ç”±(router) Nuxtæ¨¡å—(modules) æ’ä»¶(plugins) é¡µé¢å…ƒä¿¡æ¯(head)   é¡µé¢å¸ƒå±€(layout) çŠ¶æ€ç®¡ç†(vuex) ä¸€é”®">
<meta name="keywords" content="Vue,Nuxt">
<meta property="og:type" content="article">
<meta property="og:title" content="Nuxt.jsè¸©å‘è®°ï¼Œåˆ©ç”¨Nuxtä¸€é”®ç”Ÿæˆå¤šé¡µé¢é™æ€ç«™ç‚¹">
<meta property="og:url" content="https://songyazhao.github.io/2018/06/05/Nuxt.jsè¸©å‘è®°ï¼Œåˆ©ç”¨Nuxtä¸€é”®ç”Ÿæˆå¤šé¡µé¢é™æ€ç«™ç‚¹/index.html">
<meta property="og:site_name" content="é…·é…·å“’å°ç«™">
<meta property="og:description" content="æœ¬æ–‡ç»“åˆå®é™…é¡¹ç›®åŸºäº `Nuxt.js@1.4.0` è¿›è¡Œè®²è§£ï¼Œéƒ¨åˆ†æ¡ˆä¾‹æ‘˜è‡ª Nuxt.js å®˜æ–¹æ–‡æ¡£ã€‚å¦‚éœ€è½¬è½½ï¼Œè¯·æ ‡æ˜å‡ºå¤„ã€‚  Nuxt.jsç®€å•ä»‹ç» ä¸ºä»€ä¹ˆä½¿ç”¨Nuxt.js? é¡¹ç›®åˆ›å»º é¡¹ç›®é…ç½® nuxt.config.jsæ€»è§ˆ è·¯ç”±(router) Nuxtæ¨¡å—(modules) æ’ä»¶(plugins) é¡µé¢å…ƒä¿¡æ¯(head)   é¡µé¢å¸ƒå±€(layout) çŠ¶æ€ç®¡ç†(vuex) ä¸€é”®">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2018-10-27T07:28:23.915Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Nuxt.jsè¸©å‘è®°ï¼Œåˆ©ç”¨Nuxtä¸€é”®ç”Ÿæˆå¤šé¡µé¢é™æ€ç«™ç‚¹">
<meta name="twitter:description" content="æœ¬æ–‡ç»“åˆå®é™…é¡¹ç›®åŸºäº `Nuxt.js@1.4.0` è¿›è¡Œè®²è§£ï¼Œéƒ¨åˆ†æ¡ˆä¾‹æ‘˜è‡ª Nuxt.js å®˜æ–¹æ–‡æ¡£ã€‚å¦‚éœ€è½¬è½½ï¼Œè¯·æ ‡æ˜å‡ºå¤„ã€‚  Nuxt.jsç®€å•ä»‹ç» ä¸ºä»€ä¹ˆä½¿ç”¨Nuxt.js? é¡¹ç›®åˆ›å»º é¡¹ç›®é…ç½® nuxt.config.jsæ€»è§ˆ è·¯ç”±(router) Nuxtæ¨¡å—(modules) æ’ä»¶(plugins) é¡µé¢å…ƒä¿¡æ¯(head)   é¡µé¢å¸ƒå±€(layout) çŠ¶æ€ç®¡ç†(vuex) ä¸€é”®">
  
    <link rel="alternative" href="/atom.xml" title="é…·é…·å“’å°ç«™" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/head_icon.jpg">
  
  <link rel="stylesheet" href="/css/style.css">
  
<script>
    (function(){
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
        }
        else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

  
<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-85415703-1', 'auto');
  ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  <script src="//cdn.bootcss.com/require.js/2.3.2/require.min.js"></script>
  <script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>

  
      <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
<script>AV.initialize("jujym3PQqs2CYLtDvL7IzoeG-gzGzoHsz", "VhdH9bslRJKK6mKVS48uU6Ef");</script>
<script src="/js/Counter.js"></script>
  
</head></html>
<body>
  <div id="container">
    <div class="switch">
      <input type="checkbox">
      <label></label>
    </div>
    <div id="particles-js">
    </div>
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="/img/head_icon.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">ç³–é†‹é‡Œè„Šå‰çƒ§åŒ…</a></h1>
		</hgroup>

		
		<p class="header-subtitle">æ¡Œæ¸¸æ§ã€å¥èº«ğŸ¶</p>
		<p class="header-subtitle">ä¸çŸ¥åç å†œã€åƒè´§</p>
		<p class="header-subtitle">å’³å’³ï¼Œä½ çœ‹èµ·æ¥å¾ˆç¾å‘³ğŸ©</p>
		<p class="header-subtitle">ï½</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
					</div>

				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>èœå•</li>
						<li>æ ‡ç­¾</li>
						
						<li>å‹æƒ…é“¾æ¥</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">ä¸»é¡µ</a></li>
				        
							<li><a href="/archives">æ‰€æœ‰æ–‡ç« </a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="qq" target="_blank" href="http://wpa.qq.com/msgrd?v=3&uin=59256790&site=qq&menu=yes" title="qq">qq</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/278220017" title="weibo">weibo</a>
					        
								<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/song-mou-mou-92-99/answers" title="zhihu">zhihu</a>
					        
								<a class="mail" target="_blank" href="mailto:59256790@qq.com" title="mail">mail</a>
					        
								<a class="github" target="_blank" href="https://github.com/songyazhao" title="github">github</a>
					        
						</div>
					</nav>
				</section>

				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/CSS/" style="font-size: 20px;">CSS</a> <a href="/tags/CentOS/" style="font-size: 10px;">CentOS</a> <a href="/tags/H5é€‚é…/" style="font-size: 10px;">H5é€‚é…</a> <a href="/tags/HTTPS/" style="font-size: 10px;">HTTPS</a> <a href="/tags/JSæŠ€å·§/" style="font-size: 20px;">JSæŠ€å·§</a> <a href="/tags/MariaDB/" style="font-size: 10px;">MariaDB</a> <a href="/tags/NodeJS/" style="font-size: 10px;">NodeJS</a> <a href="/tags/Npm/" style="font-size: 20px;">Npm</a> <a href="/tags/Nuxt/" style="font-size: 10px;">Nuxt</a> <a href="/tags/SSL/" style="font-size: 10px;">SSL</a> <a href="/tags/Stylus/" style="font-size: 10px;">Stylus</a> <a href="/tags/Vue/" style="font-size: 10px;">Vue</a> <a href="/tags/Webpack2/" style="font-size: 10px;">Webpack2</a> <a href="/tags/Yarn/" style="font-size: 10px;">Yarn</a> <a href="/tags/node-canvas/" style="font-size: 10px;">node-canvas</a> <a href="/tags/node-gyp/" style="font-size: 10px;">node-gyp</a> <a href="/tags/php-redis/" style="font-size: 10px;">php-redis</a> <a href="/tags/redis/" style="font-size: 10px;">redis</a> <a href="/tags/scrollTop/" style="font-size: 10px;">scrollTop</a> <a href="/tags/å‡çº§æŒ‡å—/" style="font-size: 10px;">å‡çº§æŒ‡å—</a> <a href="/tags/åŸç”ŸAPI/" style="font-size: 10px;">åŸç”ŸAPI</a> <a href="/tags/æƒ°æ€§åŒ¹é…/" style="font-size: 10px;">æƒ°æ€§åŒ¹é…</a> <a href="/tags/æ— é™åˆ†é¡µ/" style="font-size: 10px;">æ— é™åˆ†é¡µ</a> <a href="/tags/æ­£åˆ™/" style="font-size: 10px;">æ­£åˆ™</a> <a href="/tags/ç§»åŠ¨ç«¯é€‚é…/" style="font-size: 10px;">ç§»åŠ¨ç«¯é€‚é…</a> <a href="/tags/çª—å£é€‚é…/" style="font-size: 10px;">çª—å£é€‚é…</a> <a href="/tags/è´ªå©ªåŒ¹é…/" style="font-size: 10px;">è´ªå©ªåŒ¹é…</a>
					</div>
				</section>
				

				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://github.com/songyazhao/songyazhao.github.io">github</a>
			        
			        </div>
				</section>
				

				
			</div>
		</div>
	</header>
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
        <div class="switch">
          <input type="checkbox">
          <label></label>
        </div>
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">ç³–é†‹é‡Œè„Šå‰çƒ§åŒ…</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="/img/head_icon.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">ç³–é†‹é‡Œè„Šå‰çƒ§åŒ…</h1>
			</hgroup>
			
			<p class="header-subtitle">æ¡Œæ¸¸æ§ã€å¥èº«ğŸ¶</p>
			<p class="header-subtitle">ä¸çŸ¥åç å†œã€åƒè´§</p>
			<p class="header-subtitle">å’³å’³ï¼Œä½ çœ‹èµ·æ¥å¾ˆç¾å‘³ğŸ©</p>
			<p class="header-subtitle">ï½</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">ä¸»é¡µ</a></li>
		        
					<li><a href="/archives">æ‰€æœ‰æ–‡ç« </a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="qq" target="_blank" href="http://wpa.qq.com/msgrd?v=3&uin=59256790&site=qq&menu=yes" title="qq">qq</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/278220017" title="weibo">weibo</a>
			        
						<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/song-mou-mou-92-99/answers" title="zhihu">zhihu</a>
			        
						<a class="mail" target="_blank" href="mailto:59256790@qq.com" title="mail">mail</a>
			        
						<a class="github" target="_blank" href="https://github.com/songyazhao" title="github">github</a>
			        
				</div>
			</nav>
		</header>
	</div>
</nav>

      <div class="body-wrap"><article id="post-Nuxt.jsè¸©å‘è®°ï¼Œåˆ©ç”¨Nuxtä¸€é”®ç”Ÿæˆå¤šé¡µé¢é™æ€ç«™ç‚¹" class="article article-type-post" itemscope="" itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/06/05/Nuxt.jsè¸©å‘è®°ï¼Œåˆ©ç”¨Nuxtä¸€é”®ç”Ÿæˆå¤šé¡µé¢é™æ€ç«™ç‚¹/" class="article-date">
  	<time datetime="2018-06-05T10:06:51.000Z" itemprop="datePublished">2018-06-05</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Nuxt.jsè¸©å‘è®°ï¼Œåˆ©ç”¨Nuxtä¸€é”®ç”Ÿæˆå¤šé¡µé¢é™æ€ç«™ç‚¹
      
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Nuxt/">Nuxt</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vue/">Vue</a></li></ul>
	</div>

        
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Vue/">Vue</a>
	</div>


        
          
<div class="counter-tag counter">
    <span id="/2018/06/05/Nuxt.jsè¸©å‘è®°ï¼Œåˆ©ç”¨Nuxtä¸€é”®ç”Ÿæˆå¤šé¡µé¢é™æ€ç«™ç‚¹/" class="leancloud_visitors post-title-link" style="font-size: 12px" data-flag-title="Nuxt.jsè¸©å‘è®°ï¼Œåˆ©ç”¨Nuxtä¸€é”®ç”Ÿæˆå¤šé¡µé¢é™æ€ç«™ç‚¹">
         &nbsp;
        view
    </span>
</div>

        
        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- ä¸€ä»¶äº§å“ï¼Œè¦ç»å†æ€æ ·çš„æ„æ€ï¼Œæ‰èƒ½é€ å°±ä¸ä¸€æ ·ä½“éªŒã€‚ -->
<!-- ä¸€ä»½è®¾è®¡ï¼Œè¦ç»å†æ€æ ·çš„æ£æ‘©ï¼Œæ‰èƒ½ã€‚ã€‚ -->
<!-- ä¸€ä¸ªç½‘é¡µï¼Œè¦ç»å†æ€æ ·çš„è¿‡ç¨‹ï¼Œæ‰èƒ½æŠµè¾¾ç”¨æˆ·é¢å‰ã€‚ -->
<p>æœ¬æ–‡ç»“åˆå®é™…é¡¹ç›®åŸºäº <a href="mailto:`Nuxt.js@1.4.0" target="_blank" rel="noopener">`Nuxt.js@1.4.0</a>` è¿›è¡Œè®²è§£ï¼Œéƒ¨åˆ†æ¡ˆä¾‹æ‘˜è‡ª <a href="https://nuxtjs.org" target="_blank" rel="noopener">Nuxt.js</a> å®˜æ–¹æ–‡æ¡£ã€‚<em>å¦‚éœ€è½¬è½½ï¼Œè¯·æ ‡æ˜å‡ºå¤„ã€‚</em></p>
<ul>
<li><a href="#1">Nuxt.jsç®€å•ä»‹ç»</a></li>
<li><a href="#2">ä¸ºä»€ä¹ˆä½¿ç”¨Nuxt.js?</a></li>
<li><a href="#3">é¡¹ç›®åˆ›å»º</a></li>
<li><a href="#4">é¡¹ç›®é…ç½®</a><ul>
<li><a href="#4.1">nuxt.config.jsæ€»è§ˆ</a></li>
<li><a href="#4.2">è·¯ç”±(router)</a></li>
<li><a href="#4.3">Nuxtæ¨¡å—(modules)</a></li>
<li><a href="#4.4">æ’ä»¶(plugins)</a></li>
<li><a href="#4.5">é¡µé¢å…ƒä¿¡æ¯(head)</a></li>
</ul>
</li>
<li><a href="#5">é¡µé¢å¸ƒå±€(layout)</a></li>
<li><a href="#6">çŠ¶æ€ç®¡ç†(vuex)</a></li>
<li><a href="#7">ä¸€é”®é™æ€åŒ–</a></li>
</ul>
<a id="more"></a>
<h2 id="1">Nuxt.jsç®€å•ä»‹ç»</h2>

<p>2016 å¹´ 10 æœˆ 25 æ—¥ï¼Œ<a href="https://zeit.co/" target="_blank" rel="noopener">zeit.co</a> èƒŒåçš„å›¢é˜Ÿå¯¹å¤–å‘å¸ƒäº† <a href="https://zeit.co/blog/next" target="_blank" rel="noopener">Next.js</a>ï¼Œä¸€ä¸ª React çš„æœåŠ¡ç«¯æ¸²æŸ“åº”ç”¨æ¡†æ¶ã€‚å‡ å°æ—¶åï¼Œä¸ Next.js å¼‚æ›²åŒå·¥ï¼Œä¸€ä¸ªåŸºäº Vue.js çš„æœåŠ¡ç«¯æ¸²æŸ“åº”ç”¨æ¡†æ¶åº”è¿è€Œç”Ÿï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºï¼šNuxt.jsã€‚</p>
<p>Nuxt.js æ˜¯ä¸€ä¸ªåŸºäº Vue.js çš„é€šç”¨åº”ç”¨æ¡†æ¶ã€‚é€šè¿‡å¯¹å®¢æˆ·ç«¯/æœåŠ¡ç«¯åŸºç¡€æ¶æ„çš„æŠ½è±¡ç»„ç»‡ï¼ŒNuxt.js ä¸»è¦å…³æ³¨çš„æ˜¯åº”ç”¨çš„ UIæ¸²æŸ“ã€‚Nuxt.js é¢„è®¾äº†åˆ©ç”¨Vue.jså¼€å‘æœåŠ¡ç«¯æ¸²æŸ“çš„åº”ç”¨æ‰€éœ€è¦çš„å„ç§é…ç½®ã€‚</p>
<h2 id="2">ä¸ºä»€ä¹ˆä½¿ç”¨Nuxt.js?</h2>

<ul>
<li>SSRï¼ˆæœåŠ¡ç«¯æ¸²æŸ“ï¼‰çš„é¡µé¢åˆå§‹åŠ è½½æ—¶é—´æ˜¾ç„¶ä¼˜äºå•é¡µé¦–å±æ¸²æŸ“</li>
<li>å¯ä»¥æ–¹ä¾¿çš„å¯¹ SEO è¿›è¡Œç®¡ç†</li>
<li>æ— éœ€é…ç½®é¡µé¢è·¯ç”±ï¼Œå†…ç½® <code>vue-rouer</code>ï¼Œè‡ªåŠ¨ä¾æ® pages ç›®å½•ç»“æ„ç”Ÿæˆå¯¹åº”è·¯ç”±é…ç½®</li>
<li>ä¾¿æ·çš„ HTML å¤´éƒ¨æ ‡ç­¾ç®¡ç†ï¼ˆvue-metaï¼‰</li>
<li>é¡¹ç›®ç»“æ„è‡ªåŠ¨ä»£ç åˆ†å±‚</li>
<li>æ”¯æŒé™æ€åŒ–ï¼ˆæœ¬æ–‡å°†ç€é‡ä»¥æ­¤å±•å¼€ä»‹ç»ï¼‰</li>
</ul>
<h2 id="3">é¡¹ç›®åˆ›å»º</h2>

<p>ä¸ºäº†ä¾¿äºå¤§å®¶å¿«é€Ÿä½¿ç”¨ï¼ŒNuxt.js æä¾›äº†å¾ˆå¤šæ¨¡æ¿</p>
<p><a href="https://github.com/nuxt-community/starter-template" target="_blank" rel="noopener">starter-template</a>: åŸºç¡€Nuxt.jsæ¨¡æ¿</p>
<p><a href="https://github.com/nuxt-community/typescript-template" target="_blank" rel="noopener">typescript-template</a>: åŸºäºTypescriptçš„Nuxt.jsæ¨¡æ¿</p>
<p><a href="https://github.com/nuxt-community/express-template" target="_blank" rel="noopener">express-template</a>: Nuxt.js + Express</p>
<p><a href="https://github.com/nuxt-community/koa-template" target="_blank" rel="noopener">koa-template</a>: Nuxt.js + Koa</p>
<p><a href="https://github.com/nuxt-community/adonuxt-template" target="_blank" rel="noopener">adonuxt-template</a>: Nuxt.js + AdonisJS</p>
<p><a href="https://github.com/nuxt-community/electron-template" target="_blank" rel="noopener">electron-template</a>: Nuxt.js + Electron<br><br>â€¦</p>
<p>ç­‰ç­‰ï¼Œæ›´å¤šçš„å¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ° <a href="https://github.com/nuxt-community" target="_blank" rel="noopener">nuxt-community</a></p>
<p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ <code>starter-template</code>ï¼Œå¯ä»¥ä½¿ç”¨ <a href="https://github.com/vuejs/vue-cli" target="_blank" rel="noopener">vue-cli</a> å®‰è£…ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g vue-cli</span><br><span class="line">$ vue init nuxt-community/starter-template nuxt-demo</span><br><span class="line">$ <span class="built_in">cd</span> nuxt-demo</span><br><span class="line">$ npm install</span><br></pre></td></tr></table></figure>
<p>ç”Ÿæˆé¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">nuxt-demo/</span><br><span class="line">â”œâ”€â”€ assets/</span><br><span class="line">â”œâ”€â”€ components/</span><br><span class="line">â”‚   â””â”€â”€ AppLogo.vue</span><br><span class="line">â”œâ”€â”€ layouts/</span><br><span class="line">â”‚   â””â”€â”€ default.vue</span><br><span class="line">â”œâ”€â”€ middleware/</span><br><span class="line">â”œâ”€â”€ pages/</span><br><span class="line">â”‚   â””â”€â”€ index.vue</span><br><span class="line">â”œâ”€â”€ plugins/</span><br><span class="line">â”‚   â””â”€â”€ README.md</span><br><span class="line">â”œâ”€â”€ static/</span><br><span class="line">â”‚   â””â”€â”€ favicon.ico</span><br><span class="line">â”œâ”€â”€ store/</span><br><span class="line">â”œâ”€â”€ nuxt<span class="selector-class">.config</span><span class="selector-class">.js</span></span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â””â”€â”€ README.md</span><br></pre></td></tr></table></figure></p>
<p>å¯ä»¥çœ‹å‡ºæ¥é¡¹ç›®ç»“æ„è¿˜æ˜¯æ¯”è¾ƒæ¸…æ™°çš„ï¼Œæ¥ç€æˆ‘ä»¬æ ¹æ®ä¸šåŠ¡éœ€æ±‚åœ¨ <code>vue-cli</code> è„šæ‰‹æ¶ç”Ÿæˆçš„é¡¹ç›®åŸºç¡€ä¸Šæ‰©å±•å’Œä¿®æ”¹å‡ºæ¥çš„ç›®å½•ç»“æ„å¦‚ä¸‹(å·²éšå»éƒ¨åˆ†æ–‡ä»¶)ï¼š<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">nuxt-demo/</span><br><span class="line">â”œâ”€â”€ api/                                  <span class="comment">//- æ¥å£</span></span><br><span class="line">â”‚   â””â”€â”€ index.js</span><br><span class="line">â”œâ”€â”€ assets/                               <span class="comment">//- éœ€è¦ç¼–è¯‘çš„é™æ€èµ„æºï¼Œå¦‚ scssã€lessã€stylus</span></span><br><span class="line">â”‚   â”œâ”€â”€ images/                           <span class="comment">//- å›¾ç‰‡</span></span><br><span class="line">â”‚   â””â”€â”€ styles/                           <span class="comment">//- æ ·å¼</span></span><br><span class="line">â”œâ”€â”€ build/                                <span class="comment">//- è‡ªå®šä¹‰çš„ä¸€äº›ç¼–è¯‘é…ç½®</span></span><br><span class="line">â”œâ”€â”€ components/                           <span class="comment">//- å…¬ç”¨çš„ç»„ä»¶</span></span><br><span class="line">â”‚   â”œâ”€â”€ dm-toast<span class="selector-class">.vue</span>                      <span class="comment">//- å…¨å±€ç»„ä»¶`dm-toast`</span></span><br><span class="line">â”‚   â””â”€â”€ ...</span><br><span class="line">â”œâ”€â”€ data/                                 <span class="comment">//- é™æ€æ•°æ®</span></span><br><span class="line">â”œâ”€â”€ layouts/                              <span class="comment">//- å¸ƒå±€</span></span><br><span class="line">â”‚   â”œâ”€â”€ components/</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ dm-<span class="selector-tag">footer</span><span class="selector-class">.vue</span>                 <span class="comment">//- å…¬ç”¨header</span></span><br><span class="line">â”‚   â”‚   â””â”€â”€ dm-<span class="selector-tag">header</span><span class="selector-class">.vue</span>                 <span class="comment">//- å…¬ç”¨footer</span></span><br><span class="line">â”‚   â””â”€â”€ default<span class="selector-class">.vue</span>                       <span class="comment">//- é»˜è®¤å¸ƒå±€</span></span><br><span class="line">â”œâ”€â”€ middleware/                           <span class="comment">//- ä¸­é—´ä»¶</span></span><br><span class="line">â”œâ”€â”€ mixins/                               <span class="comment">//- Vue mixins</span></span><br><span class="line">â”œâ”€â”€ pages/                                <span class="comment">//- é¡µé¢</span></span><br><span class="line">â”‚   â”œâ”€â”€ index<span class="selector-class">.vue</span>                         <span class="comment">//- ä¸»é¡µ</span></span><br><span class="line">â”‚   â””â”€â”€ ...</span><br><span class="line">â”œâ”€â”€ plugins/                              <span class="comment">//- vueæ’ä»¶</span></span><br><span class="line">â”‚   â””â”€â”€ dm-tracker.js/                    <span class="comment">//- æŒ‚è½½utils/tracker.js</span></span><br><span class="line">â”œâ”€â”€ static/                               <span class="comment">//- æ— éœ€ç¼–è¯‘å¤„ç†çš„é™æ€èµ„æº</span></span><br><span class="line">â”‚   â””â”€â”€ images/                           <span class="comment">//- è¿™é‡Œå­˜æ”¾äº†ä¸€äº›é€šè¿‡æ•°æ®å¾ªç¯å‡ºæ¥çš„å›¾ç‰‡</span></span><br><span class="line">â”œâ”€â”€ store/                                <span class="comment">//- vuex</span></span><br><span class="line">â”‚   â””â”€â”€ index.js</span><br><span class="line">â”œâ”€â”€ utils/                                <span class="comment">//- å·¥å…·é›†</span></span><br><span class="line">â”‚   â”œâ”€â”€ index.js</span><br><span class="line">â”‚   â”œâ”€â”€ http<span class="selector-class">.js</span>                           <span class="comment">//- axios</span></span><br><span class="line">â”‚   â”œâ”€â”€ tracker<span class="selector-class">.js</span>                        <span class="comment">//- PVç»Ÿè®¡</span></span><br><span class="line">â”‚   â””â”€â”€ tracker-uitl.js</span><br><span class="line">â”œâ”€â”€ vendor/                               <span class="comment">//- ç¬¬ä¸‰æ–¹çš„åº“å’Œæ’ä»¶</span></span><br><span class="line">â”‚   â””â”€â”€ index.js</span><br><span class="line">â”œâ”€â”€ nuxt<span class="selector-class">.config</span><span class="selector-class">.js</span>                        <span class="comment">//- Nuxt.jsé…ç½®æ–‡ä»¶</span></span><br><span class="line">â”œâ”€â”€ seo<span class="selector-class">.config</span><span class="selector-class">.js</span>                         <span class="comment">//- SEOç›¸å…³é…ç½®æ–‡ä»¶</span></span><br><span class="line">â”œâ”€â”€ package-lock<span class="selector-class">.json</span>                     <span class="comment">//- npmçš„ç‰ˆæœ¬é”</span></span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â””â”€â”€ README.md</span><br></pre></td></tr></table></figure></p>
<h2 id="4">é¡¹ç›®é…ç½®</h2>

<p>Nuxt.js é»˜è®¤çš„é…ç½®æ¶µç›–äº†å¤§éƒ¨åˆ†ä½¿ç”¨æƒ…å½¢ï¼Œå¯é€šè¿‡ <code>nuxt.config.js</code> æ¥è¦†ç›–é»˜è®¤çš„é…ç½®ï¼Œä¸‹é¢ç›¸å…³é…ç½®æ ¹æ®å®é™…é¡¹ç›®é©±åŠ¨è®²è§£ï¼Œæœªæ¶‰åŠåˆ°çš„é…ç½®é¡¹å¯æŸ¥é˜… <a href="https://nuxtjs.org/api" target="_blank" rel="noopener">Nuxt.js</a> æ–‡æ¡£ã€‚</p>
<h3 id="4.1">nuxt.config.js æ€»è§ˆ</h3>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">//- Document Common &lt;head&gt;</span></span><br><span class="line">  head: &#123;</span><br><span class="line">    meta: [</span><br><span class="line">      title: <span class="string">'æˆ‘æ˜¯ä¸€ä¸ªtitle'</span>,</span><br><span class="line">      &#123; <span class="attr">charset</span>: <span class="string">'utf-8'</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">'viewport'</span>, <span class="attr">content</span>: <span class="string">'width=device-width, initial-scale=1'</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">'renderer'</span>, <span class="attr">content</span>: <span class="string">'webkit'</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">'applicable-device'</span>, <span class="attr">content</span>: <span class="string">'pc'</span> &#125;,</span><br><span class="line">      &#123; <span class="string">'http-equiv'</span>: <span class="string">'X-UA-Compatible'</span>, <span class="attr">content</span>: <span class="string">'IE=edge,chrome=1'</span> &#125;,</span><br><span class="line">      &#123; <span class="string">'http-equiv'</span>: <span class="string">'Cache-Control'</span>, <span class="attr">content</span>: <span class="string">'no-transform'</span> &#125;,</span><br><span class="line">      &#123; <span class="string">'http-equiv'</span>: <span class="string">'Cache-Control'</span>, <span class="attr">content</span>: <span class="string">'no-siteapp'</span> &#125;</span><br><span class="line">    ],</span><br><span class="line"></span><br><span class="line">    link: [</span><br><span class="line">      &#123; <span class="attr">rel</span>: <span class="string">'icon'</span>, <span class="attr">type</span>: <span class="string">'image/x-icon'</span>, <span class="attr">href</span>: <span class="string">'ä½ çš„iconåœ°å€'</span> &#125;</span><br><span class="line">    ],</span><br><span class="line"></span><br><span class="line">    <span class="comment">//- è¿™é‡Œå¯ä»¥å†™ä¸€äº›æ¯ä¸ªé¡µé¢éœ€è¦é¢å¤–å¼•å…¥çš„ä¸€äº›jsä»£ç ï¼Œæ¯”å¦‚ï¼šç™¾åº¦ç»Ÿè®¡</span></span><br><span class="line">    <span class="comment">//- `alert(1)` ä»…ä¸ºä»£ç ç¤ºä¾‹</span></span><br><span class="line">    script: [&#123;</span><br><span class="line">      type: <span class="string">'text/javascript'</span>,</span><br><span class="line">      innerHTML: <span class="string">`alert(1)`</span></span><br><span class="line">    &#125;],</span><br><span class="line"></span><br><span class="line">    <span class="comment">//- __dangerouslyDisableSanitizers è®¾ç½®&lt;script&gt;ä¸­çš„å†…å®¹ä¸è¢«è½¬ä¹‰ã€‚</span></span><br><span class="line">    <span class="comment">//- https://github.com/declandewet/vue-meta#__dangerouslydisablesanitizers-string</span></span><br><span class="line">    __dangerouslyDisableSanitizers: [<span class="string">'script'</span>]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//- é¡µé¢åˆ‡æ¢çš„æ—¶å€™è¿›åº¦æ¡çš„é¢œè‰²</span></span><br><span class="line">  loading: &#123; <span class="attr">color</span>: <span class="string">'#77b6ff'</span> &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">//- modules å¯ä»¥ç”¨æ¥æ‰©å±•æ ¸å¿ƒåŠŸèƒ½æˆ–è€…æ·»åŠ ä¸€äº›é›†æˆ</span></span><br><span class="line">  <span class="comment">//- è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªæœ¬åœ°å¼€å‘è¯·æ±‚è¿œç«¯æ¥å£çš„åå‘ä»£ç†æ¨¡å— `@nuxtjs/proxy`</span></span><br><span class="line">  <span class="comment">//- https://nuxtjs.org/api/configuration-modules</span></span><br><span class="line">  modules: [</span><br><span class="line">    <span class="string">'@nuxtjs/proxy'</span></span><br><span class="line">  ],</span><br><span class="line"></span><br><span class="line">  <span class="comment">//- ä¸Šé¢ modules ä¸­é…ç½®äº† '@nuxtjs/proxy' æ—¶ï¼Œæ­¤å­—æ®µæ‰ä¼šç”Ÿæ•ˆ</span></span><br><span class="line">  <span class="comment">//- https://github.com/nuxt-community/proxy-module</span></span><br><span class="line">  proxy: &#123;</span><br><span class="line">    <span class="string">'/api'</span>: <span class="string">'http://xxx.xxx.com'</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">//- åœ¨è¿™é‡Œæ³¨å†Œ `Vue` çš„æ’ä»¶ã€å…¨å±€ç»„ä»¶æˆ–è€…å…¶ä»–çš„ä¸€äº›éœ€è¦æŒ‚è½½åˆ° `Vue` åŸå‹ä¸‹é¢çš„ä¸œè¥¿</span></span><br><span class="line">  <span class="comment">//- ssr ä¸º `false` è¡¨ç¤ºè¯¥æ–‡ä»¶åªä¼šåœ¨æµè§ˆå™¨ç«¯è¢«æ‰“åŒ…å¼•å…¥</span></span><br><span class="line">  <span class="comment">//- https://nuxtjs.org/api/configuration-plugins</span></span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="string">'~plugins/dm-toast'</span>,</span><br><span class="line">    &#123; <span class="attr">src</span>: <span class="string">'~plugins/dm-tracker'</span>, <span class="attr">ssr</span>: <span class="literal">false</span> &#125;</span><br><span class="line">  ],</span><br><span class="line"></span><br><span class="line">  <span class="comment">//- é…ç½®å…¨å±€æ ·å¼æ–‡ä»¶ï¼ˆæ¯ä¸ªé¡µé¢éƒ½ä¼šè¢«å¼•å…¥ï¼‰</span></span><br><span class="line">  <span class="comment">//- `lang` å¯ä»¥ä¸ºè¯¥æ ·å¼æ–‡ä»¶é…ç½®ç›¸å…³ loader è¿›è¡Œè½¬è¯‘</span></span><br><span class="line">  css: [</span><br><span class="line">    <span class="string">'animate.css'</span>,</span><br><span class="line">    &#123; <span class="attr">src</span>: <span class="string">'~assets/styles/common.scss'</span>, <span class="attr">lang</span>: <span class="string">'scss'</span> &#125;</span><br><span class="line">  ],</span><br><span class="line"></span><br><span class="line">  <span class="comment">//- é…ç½® Nuxt.js åº”ç”¨ç”Ÿæˆé™æ€ç«™ç‚¹çš„å…·ä½“æ–¹å¼ã€‚</span></span><br><span class="line">  <span class="comment">//- https://nuxtjs.org/api/configuration-generate</span></span><br><span class="line">  generate: &#123;</span><br><span class="line">    <span class="comment">//- ä¸ºåŠ¨æ€è·¯ç”±æ·»åŠ é™æ€åŒ–</span></span><br><span class="line">    <span class="comment">//- é™æ€åŒ–ç«™ç‚¹çš„æ—¶å€™åŠ¨æ€è·¯ç”±æ˜¯æ— æ³•è¢«æ„ŸçŸ¥åˆ°çš„</span></span><br><span class="line">    <span class="comment">//- æ‰€ä»¥å¯ä»¥é¢„æµ‹æ€§çš„åœ¨è¿™é‡Œé…ç½®</span></span><br><span class="line">    routes: [</span><br><span class="line">      <span class="string">'/1'</span>,</span><br><span class="line">      <span class="string">'/2'</span>,</span><br><span class="line">      <span class="string">'/3'</span></span><br><span class="line">      ...</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">//- router å±æ€§è®©ä½ å¯ä»¥ä¸ªæ€§åŒ–é…ç½® Nuxt.js åº”ç”¨çš„è·¯ç”±ï¼ˆvue-routerï¼‰</span></span><br><span class="line">  <span class="comment">//- https://nuxtjs.org/api/configuration-router</span></span><br><span class="line">  router: &#123;</span><br><span class="line">    <span class="comment">//- ä¸­é—´ä»¶åœ¨æ¯æ¬¡è·¯ç”±åˆ‡æ¢å‰è¢«è°ƒç”¨</span></span><br><span class="line">    middleware: <span class="string">'set-env'</span>,</span><br><span class="line">    <span class="comment">//- é€šè¿‡ extendRoutes æ¥æ‰©å±•æˆ–è€…ä¿®æ”¹ Nuxt.js ç”Ÿæˆçš„è·¯ç”±è¡¨é…ç½®</span></span><br><span class="line">    extendRoutes(routes) &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">//- ç¼–è¯‘é…ç½®</span></span><br><span class="line">  build: &#123;</span><br><span class="line">    <span class="comment">//- ä½¿ç”¨ webpack-bundle-analyzer åˆ†æå¹¶å¯è§†åŒ–æ„å»ºåçš„æ‰“åŒ…æ–‡ä»¶</span></span><br><span class="line">    <span class="comment">//- ä½ å¯ä»¥åŸºäºåˆ†æç»“æœæ¥å†³å®šå¦‚ä½•ä¼˜åŒ–å®ƒ</span></span><br><span class="line">    analyze: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">//- ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„æ„å»ºé…ç½®è¿›è¡Œæ‰‹åŠ¨çš„æ‰©å±•å¤„ç†</span></span><br><span class="line">    <span class="comment">//- https://nuxtjs.org/api/configuration-build#extend</span></span><br><span class="line">    extend(config, &#123; isDev, isClient, isServer &#125;) &#123;</span><br><span class="line">      <span class="keyword">if</span> (isDev &amp;&amp; isClient) &#123;</span><br><span class="line">        <span class="comment">//- ä½¿ç”¨ ESLint ä¿è¯ä»£ç è§„èŒƒ</span></span><br><span class="line">        config.module.rules.push(&#123;</span><br><span class="line">          enforce: <span class="string">'pre'</span>,</span><br><span class="line">          test: <span class="regexp">/\.(js|vue)$/</span>,</span><br><span class="line">          loader: <span class="string">'eslint-loader'</span>,</span><br><span class="line">          exclude: <span class="regexp">/(node_modules)/</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (!isDev) &#123;</span><br><span class="line">        config.module.rules <span class="comment">//- è¦†ç›–é»˜è®¤ `url-loader` é…ç½®</span></span><br><span class="line">          .find(<span class="function">(<span class="params">rule</span>) =&gt;</span> rule.loader === <span class="string">'url-loader'</span>)</span><br><span class="line">            .options.name = <span class="string">'images/[name].[ext]?v=[hash:7]'</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">//- è¿™é‡Œå¯ä»¥è‡ªå®šä¹‰æ‰“åŒ…åçš„æ–‡ä»¶å</span></span><br><span class="line">    <span class="comment">//- `hash` é¡¹ç›®ä¸­ä»»ä½•ä¸€ä¸ªæ–‡ä»¶æ”¹åŠ¨åå°±ä¼šè¢«é‡æ–°åˆ›å»º</span></span><br><span class="line">    <span class="comment">//- `chunkhash` æ˜¯æ ¹æ®æ¨¡å—å†…å®¹è®¡ç®—å‡ºçš„hashå€¼ï¼Œå¯¹åº”çš„æ–‡ä»¶å‘ç”Ÿå†…å®¹å˜åŠ¨å°±ä¼šé‡æ–°è®¡ç®—</span></span><br><span class="line">    <span class="comment">//- ç”Ÿæˆå¦‚ä¸‹ï¼š</span></span><br><span class="line">    <span class="comment">//- &lt;head&gt;</span></span><br><span class="line">    <span class="comment">//-   ...</span></span><br><span class="line">    <span class="comment">//-   &lt;link href="//cdn.xxx.com/manifest.js?v=8d09730" rel="preload" as="script"&gt;</span></span><br><span class="line">    <span class="comment">//-   &lt;link href="//cdn.xxx.com/vendor.js?v=8d09730" rel="preload" as="script"&gt;</span></span><br><span class="line">    <span class="comment">//-   &lt;link href="//cdn.xxx.com/app.js?v=fea3ec0" rel="preload" as="script"&gt;</span></span><br><span class="line">    <span class="comment">//-   &lt;link href="//cdn.xxx.com/pages_index.js?v=6f7b904" rel="preload" as="script"&gt;</span></span><br><span class="line">    <span class="comment">//-   ...</span></span><br><span class="line">    <span class="comment">//- &lt;/head&gt;</span></span><br><span class="line">    filenames: &#123;</span><br><span class="line">      manifest: <span class="string">'js/manifest.js?v=[hash:7]'</span>,</span><br><span class="line">      vendor: <span class="string">'js/vendor.js?v=[hash:7]'</span>,</span><br><span class="line">      app: <span class="string">'js/app.js?v=[chunkhash:7]'</span>,</span><br><span class="line">      <span class="comment">//- `chunk` è¿™é‡Œè¿™æ ·ä½¿ç”¨ç¼–è¯‘ä¼šæŠ¥é”™ï¼Œæœ€åé¢ä¼šè®²è§£ç›¸å…³è§£å†³æ–¹æ¡ˆ</span></span><br><span class="line">      chunk: <span class="string">'js/[name].js?v=[chunkhash:7]'</span></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">//- è‡ªå®šä¹‰ postcss é…ç½®</span></span><br><span class="line">    <span class="comment">//- https://nuxtjs.org/api/configuration-build#postcss</span></span><br><span class="line">    postcss: [</span><br><span class="line">      <span class="built_in">require</span>(<span class="string">'autoprefixer'</span>)(&#123;</span><br><span class="line">        browsers: [<span class="string">'&gt; 1%'</span>, <span class="string">'last 3 versions'</span>, <span class="string">'not ie &lt;= 8'</span>]</span><br><span class="line">      &#125;)</span><br><span class="line">    ],</span><br><span class="line"></span><br><span class="line">    <span class="comment">//- è¿™é‡Œå¯ä»¥è®¾ç½®ä½ çš„CDNåœ°å€ï¼Œç”Ÿæˆçš„é™æ€èµ„æºå°†ä¼šåŸºäºæ­¤CDNåœ°å€åŠ ä¸ŠURLå‰ç¼€</span></span><br><span class="line">    publicPath: <span class="string">'//cdn.xxx.com/'</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">//- Nuxt.js å…è®¸ä½ åœ¨ç”Ÿæˆçš„ vendor.js æ–‡ä»¶ä¸­æ·»åŠ ä¸€äº›æ¨¡å—ï¼Œä»¥å‡å°‘åº”ç”¨ bundle çš„ä½“ç§¯</span></span><br><span class="line">    <span class="comment">//- è¿™é‡Œè¯´çš„æ˜¯ä¸€äº›ä½ æ‰€ä¾èµ–çš„ç¬¬ä¸‰æ–¹æ¨¡å— (æ¯”å¦‚ axios)ï¼Œæˆ–è€…ä½¿ç”¨é¢‘ç‡è¾ƒé«˜çš„ä¸€äº›è‡ªå®šä¹‰æ¨¡å—</span></span><br><span class="line">    <span class="comment">//- https://nuxtjs.org/api/configuration-build#vendor</span></span><br><span class="line">    vendor: [</span><br><span class="line">      <span class="string">'axios'</span>,</span><br><span class="line">      ...</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4.2">è·¯ç”±(router)</h3>

<p>Nuxt.js ä¾æ® pages ç›®å½•ç»“æ„ï¼Œè‡ªåŠ¨ç”Ÿæˆ vue-router æ¨¡å—çš„è·¯ç”±é…ç½®ã€‚</p>
<p>æ¯”å¦‚ï¼š<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ pages/</span><br><span class="line">â”‚   â”œâ”€â”€ b-case/</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ home.vue</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ home/</span><br><span class="line">â”‚   â”‚   â”‚   â””â”€â”€ _type.vue</span><br><span class="line">â”‚   â”‚   â””â”€â”€ _id.vue</span><br><span class="line">â”‚   â””â”€â”€ index.vue</span><br></pre></td></tr></table></figure></p>
<p>ç”Ÿæˆè·¯ç”±é…ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    name: <span class="string">'b-case-home'</span>,</span><br><span class="line">    path: <span class="string">'/b-case/home'</span>,</span><br><span class="line">    component: <span class="string">'E:\\\\nuxt-demo\\\\pages\\\\b-case\\\\home.vue'</span>,</span><br><span class="line">    chunkName: <span class="string">'pages/b-case/home'</span>,</span><br><span class="line">    children: [&#123;</span><br><span class="line">      name: <span class="string">'b-case-home-type'</span>,</span><br><span class="line">      path: <span class="string">':type?'</span>,</span><br><span class="line">      component: <span class="string">'E:\\\\nuxt-demo\\\\pages\\\\b-case\\\\home\\\\_type.vue'</span>,</span><br><span class="line">      chunkName: <span class="string">'pages/b-case/home/_type'</span></span><br><span class="line">    &#125;]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    name: <span class="string">'b-case-id'</span>,</span><br><span class="line">    path: <span class="string">'/b-case/:id?'</span>,</span><br><span class="line">    component: <span class="string">'E:\\\\nuxt-demo\\\\pages\\\\b-case\\\\_id.vue'</span>,</span><br><span class="line">    chunkName: <span class="string">'pages/b-case/_id'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    name: <span class="string">'index'</span>,</span><br><span class="line">    path: <span class="string">'/'</span>,</span><br><span class="line">    component: <span class="string">'E:\\\\nuxt-demo\\\\pages\\\\index.vue'</span>,</span><br><span class="line">    chunkName: <span class="string">'pages/index'</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½ æƒ³ä¿®æ”¹å·²æœ‰è·¯ç”±é…ç½®å¯ä»¥åœ¨ <code>nuxt.config.js</code> ä¸­æ·»åŠ  <code>route.extendRoutes</code> é…ç½®é¡¹ï¼Œè¦†ç›–å·²æœ‰è·¯ç”±æˆ–è€…æ·»åŠ æ–°çš„è·¯ç”±ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  ...</span><br><span class="line">  router: &#123;</span><br><span class="line">    ...</span><br><span class="line">    extendRoutes(routes) &#123;</span><br><span class="line">      <span class="comment">//- `routes` æ˜¯ä¸€ä¸ªåŒ…å«æ‰€æ‰€æœ‰è·¯ç”±é…ç½®ä¿¡æ¯çš„å‚æ•°</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4.3">Nuxtæ¨¡å—(modules)</h3>

<p>å¦‚æœä½ å¯¹ä¸Šè¿°è·¯ç”±çš„é…ç½®æ–¹å¼ä¸æ»¡æ„ï¼Œæƒ³è¦æ›´åŠ ä¸ªæ€§åŒ–çš„è‡ªå®šä¹‰è·¯ç”±ï¼ŒNuxt.js ç¤¾åŒºæä¾›äº†ä¸€æ¬¾ Nuxtæ¨¡å— <a href="https://github.com/nuxt-community/router-module" target="_blank" rel="noopener">router-module</a></p>
<p>ä½¿ç”¨æ­¥éª¤ï¼š</p>
<p>é¦–å…ˆå®‰è£…è¿™ä¸ªæ¨¡å—<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @nuxtjs/router --save <span class="comment"># OR yarn add @nuxtjs/router</span></span><br></pre></td></tr></table></figure></p>
<p>ç„¶ååœ¨ nuxt.config.js ä¸­æ·»åŠ æ¨¡å—å åˆ° <code>modules</code> å­—æ®µä¸‹ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports =&#123;</span><br><span class="line">  ...</span><br><span class="line">  modules: [</span><br><span class="line">    <span class="string">'@nuxtjs/router'</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º <code>routes.js</code>ï¼Œå¹¶ <code>export</code> ä¸€ä¸ªæ–¹æ³• <code>createRouter</code>ã€‚è¿™é‡Œæœ‰ä¸€ç‚¹è¦è®°ä½ï¼Œä¸èƒ½ä½¿ç”¨ <code>pages/</code> è¿™ä¸ªç›®å½•ï¼Œä¼šå’Œ Nuxt.js å®˜æ–¹çš„è·¯ç”±æœºåˆ¶äº§ç”Ÿå†²çªã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Router <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">'../views/home.vue'</span></span><br><span class="line"></span><br><span class="line">Vue.use(Router)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">createRouter</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Router(&#123;</span><br><span class="line">    mode: <span class="string">'history'</span>,</span><br><span class="line">    routes: [</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'/'</span>,</span><br><span class="line">        component: Home</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>å…¶ä»–æ¯”è¾ƒå¸¸ç”¨çš„ Nuxt.js æ¨¡å—ï¼š</p>
<p><a href="https://github.com/nuxt-community/axios-module" target="_blank" rel="noopener">axios-module</a>ï¼šaxiosæ¨¡å—ï¼Œå®ƒå°†ç½‘ç»œè¯·æ±‚ä¸é¡µé¢çš„è¿›åº¦æ¡é›†æˆ</p>
<p><a href="https://github.com/nuxt-community/proxy-module" target="_blank" rel="noopener">proxy-module</a>ï¼šåå‘ä»£ç†æ¨¡å—ï¼Œæœ¬åœ°ä¾¿æ·è°ƒè¯•è¿œç«¯æ¥å£</p>
<p><a href="https://github.com/nuxt-community/auth-module" target="_blank" rel="noopener">auth-module</a>ï¼šé‰´æƒæ¨¡å—</p>
<p><a href="https://github.com/nuxt-community/python-module" target="_blank" rel="noopener">python-module</a>ï¼šç”¨ Python ç¼–å†™ Nuxt.js åº”ç”¨ç¨‹åº</p>
<p><a href="https://github.com/nuxt-community/pwa-module" target="_blank" rel="noopener">pwa-module</a>ï¼šæŠŠä½ çš„ç«™ç‚¹å˜æˆ <a href="https://developers.google.com/web/progressive-web-apps/" target="_blank" rel="noopener">pwa</a> æ¸è¿›å¼ç½‘ç»œåº”ç”¨</p>
<p>é…ç½®æ–¹æ³•æ¯”è¾ƒç±»ä¼¼ï¼Œè¿™é‡Œä¸ä½œè¯¦ç»†è®²è§£</p>
<h3 id="4.4">æ’ä»¶(plugins)</h3>

<p>æ’ä»¶å¯ä»¥è®©æˆ‘ä»¬å‘ Vue æ³¨å…¥ä¸€äº›ä½¿ç”¨ç‡æ¯”è¾ƒé«˜çš„å±æ€§æˆ–è€…æ–¹æ³•ï¼Œè¿™é‡Œæˆ‘ä»¬è®²è§£ä¸€ä¸ªåŸ‹ç‚¹çš„æ’ä»¶æ˜¯å¦‚ä½•å®ç°çš„ã€‚</p>
<p><em>åœ¨è®²è§£åŸ‹ç‚¹ä¹‹å‰æˆ‘ä»¬éœ€è¦å…ˆäº†è§£ä¸€ä¸‹PVçš„æ¦‚å¿µï¼šPV(page view)ï¼Œå³é¡µé¢æµè§ˆé‡ï¼Œæˆ–ç‚¹å‡»é‡ï¼ŒPVä¹‹äºç½‘ç«™ï¼Œå°±åƒæ”¶è§†ç‡ä¹‹äºç”µè§†ã€‚</em></p>
<p>é€šè¿‡ <code>plugins</code> <a href="#4.1">é…ç½®é¡¹</a>ï¼Œæˆ‘ä»¬å¯ä»¥è½»è€Œæ˜“ä¸¾çš„åœ¨ Vue ä¸­ä½¿ç”¨æ’ä»¶ã€‚åŒæ—¶æˆ‘ä»¬éœ€è¦åœ¨ <code>plugins</code> ç›®å½•ä¸‹åˆ›å»ºå¯¹åº”çš„æ–‡ä»¶ï¼Œä»¥ä¿è¯é…ç½®é¡¹å¯ä»¥æ­£ç¡®çš„åŠ è½½è¿™ä¸ªæ–‡ä»¶ã€‚</p>
<blockquote>
<p>plugins/dm-tracker.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//- å°†å‘èµ·pvç»Ÿè®¡çš„æ–¹æ³•æŒ‚è½½åˆ° Vue åŸå‹ä¸‹</span></span><br><span class="line"><span class="comment">//- è®©æ¯ä¸ªç»„ä»¶éƒ½èƒ½é€šè¿‡ `this.$tracker` è®¿é—®</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> &#123; trackerPlugins &#125; <span class="keyword">from</span> <span class="string">'../utils/tracker.js'</span></span><br><span class="line"></span><br><span class="line">Vue.use(trackerPlugins)</span><br></pre></td></tr></table></figure>
<p><code>utils/tracker.js</code> é‡Œæ˜¯ä¸€äº›å‘èµ· <em>PV</em> ç»Ÿè®¡æ‰€è°ƒç”¨çš„ä»£ç ï¼ˆéšå»äº†éƒ¨åˆ†ä¸šåŠ¡ä»£ç ï¼‰ã€‚</p>
<blockquote>
<p>utils/tracker.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å‘èµ·PVç»Ÿè®¡</span></span><br><span class="line"><span class="comment"> * @param &#123;String&#125; caFrom - ev: @ca_from</span></span><br><span class="line"><span class="comment"> * @param &#123;Object&#125; vueRouteName - vm.$route.name</span></span><br><span class="line"><span class="comment"> * @return &#123;Promise&#125; æˆåŠŸ`then`æˆ–è€…å¤±è´¥`catch`çš„å›è°ƒ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> tracker = <span class="function">(<span class="params">caFrom, vueRouteName</span>) =&gt;</span> &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> tracker</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> trackerPlugins = &#123;</span><br><span class="line">  install(Vue, options) &#123;</span><br><span class="line">    Vue.prototype.$tracker = tracker</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å‘ç°å‡ ä¹æ¯æ¬¡åˆå§‹åŒ–è¿›å…¥æˆ–è€…è·³è½¬åˆ°ä¸€ä¸ªæ–°çš„é¡µé¢éƒ½éœ€è¦è°ƒç”¨ <code>this.$tracker</code> è¿™ä¸ªæ–¹æ³•ï¼Œè¦æ˜¯åœ¨æ¯ä¸ªé¡µé¢æ–‡ä»¶é‡ŒåŠ å²‚ä¸æ˜¯å¾ˆéº»çƒ¦ï¼Œå†µä¸”å¦‚æœå°†åŸ‹ç‚¹æ·±å…¥åˆ°ä¸šåŠ¡å±‚åæœŸç»´æŠ¤æ›´æ–°ä¸å…äº§ç”Ÿä¸€äº›ä¸å¿…è¦çš„ç¹çï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ <code>layout/default.vue</code> é‡Œé¢å¯¹ <code>$route</code> è¿›è¡Œç›‘å¬ï¼ŒåŒæ—¶è®¾ç½® watch å‚æ•° <code>immediate: true</code>ï¼Œä¾¿å¯é’ˆå¯¹æ¯ä¸ªé¡µé¢å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚</p>
<blockquote>
<p>layout/default.vue</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    <span class="comment">//- é€šè¿‡ç›‘å¬è·¯ç”±å˜åŒ–ï¼Œå¾—åˆ°ä¸åŒé¡µé¢çš„ pv ç»Ÿè®¡å‚æ•°ï¼ŒåŒæ—¶ `immediate: true` ä½¿å¾—æ¯æ¬¡é¡µé¢åˆå§‹è¿›æ¥ä¹Ÿä¼šé»˜è®¤æ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line">    <span class="keyword">this</span>.$watch(<span class="string">'$route'</span>, (&#123; name &#125;) =&gt; <span class="keyword">this</span>.$tracker(<span class="string">'-'</span>, name), &#123; <span class="attr">immediate</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>è‡³æ­¤ï¼Œå°±å®Œæˆäº†ä¸€ä¸ª <em>PV</em> ç»Ÿè®¡æ’ä»¶ã€‚</p>
<h3 id="4.5">é¡µé¢å…ƒä¿¡æ¯(head)</h3>

<p>Nuxt.js æ–‡æ¡£æ˜¯è¿™ä¹ˆè¯´çš„ï¼š<br><br>ä½¿ç”¨ <code>head</code> æ–¹æ³•å¯ä»¥è®¾ç½®å½“å‰é¡µé¢çš„å¤´éƒ¨æ ‡ç­¾ï¼Œåœ¨ <code>head</code> æ–¹æ³•é‡Œå¯é€šè¿‡ <code>this</code> å…³é”®å­—æ¥è·å–ç»„ä»¶çš„æ•°æ®ï¼Œæ‰€ä»¥ä½ å¯ä»¥åˆ©ç”¨é¡µé¢ç»„ä»¶çš„æ•°æ®æ¥ä¸ªæ€§åŒ–è®¾ç½® meta æ ‡ç­¾ã€‚ä¸ºäº†é¿å…å­ç»„ä»¶ä¸­çš„ meta æ ‡ç­¾ä¸èƒ½æ­£ç¡®è¦†ç›–çˆ¶ç»„ä»¶ä¸­ç›¸åŒçš„æ ‡ç­¾è€Œäº§ç”Ÿé‡å¤çš„ç°è±¡ï¼Œå»ºè®®åˆ©ç”¨ <code>hid</code> é”®ä¸º meta æ ‡ç­¾é…ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ç¼–å·ã€‚è¯·é˜…è¯»å…³äº <a href="https://github.com/declandewet/vue-meta#lists-of-tags" target="_blank" rel="noopener">vue-meta</a> çš„æ›´å¤šä¿¡æ¯ã€‚</p>
<p>å®˜æ–¹ç¤ºä¾‹ï¼š<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123; title &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined">  data () &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">      title: <span class="string">'Hello World!'</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  head () &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">      title: <span class="keyword">this</span>.title,</span></span><br><span class="line"><span class="undefined">      meta: [</span></span><br><span class="line"><span class="actionscript">        &#123; hid: <span class="string">'description'</span>, name: <span class="string">'description'</span>, content: <span class="string">'My custom description'</span> &#125;</span></span><br><span class="line"><span class="undefined">      ]</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>æ ¹æ®å®˜æ–¹æ–‡æ¡£çš„æè¿°ï¼Œæˆ‘ä»¬äº†è§£åˆ°é¡µé¢é‡Œçš„ head é…ç½®ä¼˜å…ˆçº§é«˜äº <code>nuxt.config.js</code> ä¸­çš„ headï¼Œå°±æ˜¯è¯´åŒç­‰çš„é…ç½®ä¼šè¦†ç›– <code>nuxt.config.js</code> ä¸­çš„ head ç›¸å…³ä½ç½®çš„é…ç½®ã€‚ä½†æ˜¯è¿™ä¸ªç­‰åŒè¦†ç›–çš„æ¡ä»¶æ˜¯ä½ ä¸ºå®ƒè®¾ç½®äº†åŒä¸€ä¸ª <code>hid</code>ï¼Œå®ƒä¼šä»¥æ­¤ä½œä¸ºç­‰åŒæ›¿æ¢çš„æ¡ä»¶å»æŸ¥æ‰¾ç›¸å…³ dom å…ƒç´ è¿›è¡Œæ›¿æ¢ã€‚</p>
<p>å› ä¸ºé¡¹ç›®ç”Ÿæˆçš„æ˜¯å¤šé¡µé¢é™æ€ç«™ç‚¹ï¼Œå¾ˆå¤šé¡µé¢éœ€è¦é…ç½®çš„ meta å¤šå°‘æœ‰äº›ä¸ä¸€æ ·ï¼Œæ·±å…¥åˆ°æ¯ä¸€ä¸ªé¡µé¢å»å†™å•ç‹¬çš„é…ç½®ä¿¡æ¯ä¸å…ç¹çäº†è®¸å¤šï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨ <code>nuxt.config.js</code> çš„ <code>head</code> å­—æ®µä¸­å°†å…¬ç”¨çš„ä¸€äº› <code>head</code> ä¿¡æ¯æ”¾åœ¨é‡Œé¢ï¼›æ‰€ä»¥æˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥æŠŠå®ƒå•ç‹¬æŠ½ç¦»å‡ºæ¥ä½œä¸ºä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå¹¶å’Œæ¯ä¸ªé¡µé¢çš„è·¯ç”±åå­—(<code>$route.name</code>)å…³è”èµ·æ¥ï¼Œè¿™æ ·æŒ‰ç…§ç†æƒ³æ ¼å¼çš„ <code>seo.config.js</code> å°±è¯ç”Ÿäº†ã€‚</p>
<p>seoçš„é…ç½®æ–‡ä»¶å†™å¥½äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬åº”è¯¥æ€ä¹ˆæ‰èƒ½æ³¨å…¥è¿™ä¸ªé…ç½®å‘¢ï¼Œå¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨ <code>default.vue</code> çš„ <code>head</code> å­—æ®µä¸‹å°†ä¸åŒé¡µé¢çš„é…ç½®ï¼Œå°†ä»–ä»¬å…³è”èµ·æ¥ã€‚è¿™æ ·å°±è¾¾åˆ°äº†é€šè¿‡æ¯ä¸ªé¡µé¢çš„è·¯ç”±åå­—(<code>$route.name</code>)æ¥æ˜ å°„å’Œæ¸²æŸ“å¯¹åº”çš„ metaã€‚</p>
<blockquote>
<p>layout/default.vue</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dm-header</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">nuxt</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dm-footer</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> DmHeader <span class="keyword">from</span> <span class="string">'./components/dm-header'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> DmFooter <span class="keyword">from</span> <span class="string">'./components/dm-footer'</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">const</span> heads = <span class="function"><span class="params">seo</span> =&gt;</span> <span class="function"><span class="keyword">function</span> <span class="title">getHeadsMap</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">const</span> map = &#123;&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="actionscript">  <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> seo) &#123;</span></span><br><span class="line"><span class="undefined">    map[key] = seo[key].head</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="actionscript">  <span class="keyword">return</span> map</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">const</span> routeMapHead = heads(<span class="built_in">require</span>(<span class="string">'../seo.config'</span>))</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined">  components: &#123; DmHeader, DmFooter &#125;,</span></span><br><span class="line"><span class="undefined">  computed: &#123; routeMapHead &#125;,</span></span><br><span class="line"><span class="undefined">  head() &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">//- SEO çš„ä¸­å¿ƒåŒ–ç®¡ç†, æ ¹æ®è·¯ç”± `$route.name` æ˜ å°„ Document  &lt;head&gt;</span></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> route = <span class="keyword">this</span>.$route</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> head = <span class="keyword">this</span>.routeMapHead[route.name]</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> <span class="keyword">typeof</span> head === <span class="string">'function'</span> ? head(route) : head</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>seo.config.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//- æ ¹æ®è·¯ç”± `$route.name` æ˜ å°„é…ç½®</span></span><br><span class="line"><span class="comment">//- path - é¡µé¢çš„è®¿é—®è·¯å¾„</span></span><br><span class="line"><span class="comment">//- head - Document &lt;head&gt;ï¼Œé¡µé¢çš„å…ƒä¿¡æ¯</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="string">'index'</span>: &#123;</span><br><span class="line">    head: &#123;</span><br><span class="line">      title: <span class="string">'æˆ‘æ˜¯é¦–é¡µ'</span>,</span><br><span class="line">      meta: [</span><br><span class="line">        &#123; <span class="attr">hid</span>: <span class="string">'keywords'</span>, <span class="attr">name</span>: <span class="string">'keywords'</span>, <span class="attr">content</span>: <span class="string">''</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">hid</span>: <span class="string">'description'</span>, <span class="attr">name</span>: <span class="string">'description'</span>, <span class="attr">content</span>: <span class="string">''</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">name</span>: <span class="string">'mobile-agent'</span>, <span class="attr">content</span>: <span class="string">'format=wml; url=//è¯¥é¡µé¢å¯¹åº”çš„ç§»åŠ¨ç«¯ç½‘å€/'</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">name</span>: <span class="string">'mobile-agent'</span>, <span class="attr">content</span>: <span class="string">'format=xhtml; url=//è¯¥é¡µé¢å¯¹åº”çš„ç§»åŠ¨ç«¯ç½‘å€/'</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">name</span>: <span class="string">'mobile-agent'</span>, <span class="attr">content</span>: <span class="string">'format=html5; url=//è¯¥é¡µé¢å¯¹åº”çš„ç§»åŠ¨ç«¯ç½‘å€/'</span> &#125;</span><br><span class="line">      ],</span><br><span class="line">      link: [</span><br><span class="line">        &#123; <span class="attr">rel</span>: <span class="string">'alternate'</span>, <span class="attr">type</span>: <span class="string">'applicationnd.wap.xhtml+xml'</span>, <span class="attr">media</span>: <span class="string">'handheld'</span>, <span class="attr">href</span>: <span class="string">'//è¯¥é¡µé¢å¯¹åº”çš„ç§»åŠ¨ç«¯ç½‘å€/'</span> &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//- head å¯ä»¥æ˜¯ä¸€ä¸ª `function`</span></span><br><span class="line">  <span class="comment">//- `function` ä¸­ä¼šæ¥æ”¶è¿‡æ¥ä¸€ä¸ªå‚æ•° `route`ï¼Œè¡¨ç¤ºå½“å‰é¡µé¢çš„è·¯ç”±ä¿¡æ¯</span></span><br><span class="line">  <span class="comment">//- å¯ä»¥æ ¹æ®è¿™ä¸ªåšä¸€äº›åŠ¨æ€çš„é…ç½®ä¿¡æ¯</span></span><br><span class="line">  <span class="comment">//- æ¯”å¦‚åŠ¨æ€è·¯ç”±ç”Ÿæˆçš„é¡µé¢ä¸­çš„ meta ä¿¡æ¯ï¼Œå¯èƒ½ä¼šæ ¹æ®é¡µé¢å†…å®¹æ¥å†³å®š</span></span><br><span class="line">  <span class="string">'name'</span>: &#123;</span><br><span class="line">    head(route) &#123;</span><br><span class="line">      <span class="keyword">const</span> titles = &#123;</span><br><span class="line">        <span class="string">'1'</span>: <span class="string">'ofoå°é»„è½¦'</span>,</span><br><span class="line">        <span class="string">'2'</span>: <span class="string">'ç›’é©¬ç”Ÿé²œ'</span>,</span><br><span class="line">        <span class="string">'3'</span>: <span class="string">'é¡ºä¸°é€Ÿè¿'</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        title: <span class="string">`<span class="subst">$&#123;titles[route.params.id]&#125;</span>_å®¢æˆ·æ¡ˆä¾‹-æ–—ç±³ç½‘`</span>,</span><br><span class="line">        meta: [</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">'mobile-agent'</span>, <span class="attr">content</span>: <span class="string">`format=wml; url=//è¯¥é¡µé¢å¯¹åº”çš„ç§»åŠ¨ç«¯ç½‘å€<span class="subst">$&#123;route.fullPath&#125;</span>`</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">'mobile-agent'</span>, <span class="attr">content</span>: <span class="string">`format=xhtml; url=//è¯¥é¡µé¢å¯¹åº”çš„ç§»åŠ¨ç«¯ç½‘å€<span class="subst">$&#123;route.fullPath&#125;</span>`</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">'mobile-agent'</span>, <span class="attr">content</span>: <span class="string">`format=html5; url=//è¯¥é¡µé¢å¯¹åº”çš„ç§»åŠ¨ç«¯ç½‘å€<span class="subst">$&#123;route.fullPath&#125;</span>`</span> &#125;</span><br><span class="line">        ],</span><br><span class="line">        link: [</span><br><span class="line">          &#123; <span class="attr">rel</span>: <span class="string">'alternate'</span>, <span class="attr">type</span>: <span class="string">'applicationnd.wap.xhtml+xml'</span>, <span class="attr">media</span>: <span class="string">'handheld'</span>, <span class="attr">href</span>: <span class="string">`//è¯¥é¡µé¢å¯¹åº”çš„ç§»åŠ¨ç«¯ç½‘å€<span class="subst">$&#123;route.fullPath&#125;</span>`</span> &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5">é¡µé¢å¸ƒå±€(layout)</h2>

<p>Nuxt.js ä¸­ï¼ŒæŠ½è±¡å‡ºæ¥ä¸€ä¸ªæ–°çš„æ¦‚å¿µï¼šlayoutï¼Œè¿™æ ·å°†é¡µé¢åˆ’åˆ†ä¸ºä¸‰å±‚ï¼š1. layoutã€2. pageã€3. componentï¼Œå¾ˆæ–¹ä¾¿çš„åœ¨å¤šç§å¸ƒå±€æ–¹æ¡ˆä¸­åˆ‡æ¢ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">+------------------------------+</span><br><span class="line">|            layout            |</span><br><span class="line">|                              |</span><br><span class="line">|   +----------------------+   |</span><br><span class="line">|   |         page         |   |</span><br><span class="line">|   |                      |   |</span><br><span class="line">|   |   +--------------+   |   |</span><br><span class="line">|   |   |  component   |   |   |</span><br><span class="line">|   |   +--------------+   |   |</span><br><span class="line">|   |                      |   |</span><br><span class="line">|   |   +--------------+   |   |</span><br><span class="line">|   |   |  component   |   |   |</span><br><span class="line">|   |   +--------------+   |   |</span><br><span class="line">|   |                      |   |</span><br><span class="line">|   |   +--------------+   |   |</span><br><span class="line">|   |   |  component   |   |   |</span><br><span class="line">|   |   +--------------+   |   |</span><br><span class="line">|   +----------------------+   |</span><br><span class="line">|                              |</span><br><span class="line">+------------------------------+</span><br></pre></td></tr></table></figure>
<p>åœ¨é¡µé¢ <code>pages/*.vue</code> æ–‡ä»¶ä¸­å¯ä»¥æŒ‡å®šä¸€ç§å¸ƒå±€ï¼Œä¸æŒ‡å®šçš„æ—¶å€™ä¼šä½¿ç”¨é»˜è®¤å¸ƒå±€ <code>default</code>ã€‚</p>
<p>æ¯”å¦‚ä»¥ä¸‹ç›®å½•ç»“æ„ï¼š</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ layouts/                              <span class="comment">//- å¸ƒå±€</span></span><br><span class="line">â”‚   â”œâ”€â”€ components/</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ dm-<span class="selector-tag">footer</span><span class="selector-class">.vue</span>                 <span class="comment">//- å…¬ç”¨header</span></span><br><span class="line">â”‚   â”‚   â””â”€â”€ dm-<span class="selector-tag">header</span><span class="selector-class">.vue</span>                 <span class="comment">//- å…¬ç”¨footer</span></span><br><span class="line">â”‚   â”œâ”€â”€ box.vue</span><br><span class="line">â”‚   â””â”€â”€ default<span class="selector-class">.vue</span>                       <span class="comment">//- é»˜è®¤å¸ƒå±€</span></span><br><span class="line">â”œâ”€â”€ pages/                                <span class="comment">//- é¡µé¢</span></span><br><span class="line">â”‚   â””â”€â”€ index.vue</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ <code>box.vue</code> çš„å¸ƒå±€ï¼Œ<code>&lt;nuxt/&gt;</code> å¯¹åº”é¡µé¢éƒ¨åˆ†ï¼Œç±»ä¼¼ Vue çš„ slot</p>
<blockquote>
<p>layouts/box.vue</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dm-header</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">nuxt</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dm-footer</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> DmHeader <span class="keyword">from</span> <span class="string">'./components/dm-header'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> DmFooter <span class="keyword">from</span> <span class="string">'./components/dm-footer'</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined">  components: &#123; DmHeader, DmFooter &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>pages/index.vue<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">  layout: <span class="string">'box'</span></span></span><br><span class="line"><span class="undefined">  ...</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="6">çŠ¶æ€ç®¡ç†(vuex)</h2>

<p>åƒæ™®é€šçš„ Vue åº”ç”¨ä¸€æ ·ï¼Œåœ¨ Nuxt.js ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>vuex</code>ï¼Œè€Œä¸”æ— éœ€é¢å¤– <code>npm install vuex --save</code> å’Œé…ç½®ï¼Œåªè¦ç›´æ¥åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º <code>store</code> æ–‡ä»¶å¤¹ï¼ŒNuxt.js ä¼šè‡ªåŠ¨å»å¯»æ‰¾ä¸‹é¢çš„ <code>.js</code> æ–‡ä»¶ï¼Œå¹¶è‡ªåŠ¨è¿›è¡ŒçŠ¶æ€æ ‘çš„æ¨¡å—åˆ’åˆ†ã€‚</p>
<p>Nuxt.js æ”¯æŒä¸¤ç§ä½¿ç”¨ <code>store</code> çš„æ–¹å¼ï¼š</p>
<p>æ™®é€šæ–¹å¼ï¼šè¿”å›ä¸€ä¸ª Vuex.Store å®ä¾‹ï¼Œæ„Ÿè§‰å¾ˆçœ¼ç†Ÿæœ‰æœ¨æœ‰</p>
<blockquote>
<p>store/index.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    counter: <span class="number">0</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  mutations: &#123;</span><br><span class="line">    increment (state) &#123;</span><br><span class="line">      state.counter++</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>æ¨¡å—æ–¹å¼ï¼šstore ç›®å½•ä¸‹çš„æ¯ä¸ª <code>.js</code> æ–‡ä»¶ä¼šè¢«è½¬æ¢æˆä¸ºçŠ¶æ€æ ‘æŒ‡å®šå‘½åçš„å­æ¨¡å—ï¼Œ<code>index.js</code> ä¼šè¢«ä½œä¸ºæ ¹æ¨¡å—</p>
<blockquote>
<p>store/index.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> state = <span class="function"><span class="params">()</span> =&gt;</span> (&#123;</span><br><span class="line">  counter: <span class="number">0</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> mutations = &#123;</span><br><span class="line">  increment (state) &#123;</span><br><span class="line">    state.counter++</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>store/todos.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> state = <span class="function"><span class="params">()</span> =&gt;</span> (&#123;</span><br><span class="line">  list: []</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> mutations = &#123;</span><br><span class="line">  toggle (state, todo) &#123;</span><br><span class="line">    todo.done = !todo.done</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>æœ€ç»ˆæ¸²æŸ“å‡ºæ¥çš„çŠ¶æ€æ ‘ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state: &#123; <span class="attr">counter</span>: <span class="number">0</span> &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    increment (state) &#123;</span><br><span class="line">      state.counter++</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  modules: &#123;</span><br><span class="line">    todos: &#123;</span><br><span class="line">      state: &#123;</span><br><span class="line">        list: []</span><br><span class="line">      &#125;,</span><br><span class="line">      mutations: &#123;</span><br><span class="line">        toggle (state, &#123; todo &#125;) &#123;</span><br><span class="line">          todo.done = !todo.done</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p></p><h3 id="7">ä¸€é”®é™æ€åŒ–</h3><br>ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ç”Ÿæˆåº”ç”¨çš„é™æ€ç›®å½•å’Œæ–‡ä»¶ï¼š<p></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run generate</span><br></pre></td></tr></table></figure>
<p>ç„¶åä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ç”Ÿæˆ <code>dist</code> ç›®å½•ï¼Œé™æ€åŒ–åçš„èµ„æºéƒ½åœ¨å…¶å†…(htmlã€jsã€cssâ€¦)</p>
<p>å½“ç„¶ï¼Œåœ¨é™æ€åŒ–çš„æ—¶å€™è¿˜æ˜¯é‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼šæˆ‘ä»¬æœ‰ä¸€ä¸ªä¸“é—¨æ”¾ç½®é™æ€èµ„æºçš„ CDN åˆ†å‘æœåŠ¡å™¨ï¼Œæ‰€ä»¥æ¯æ¬¡ç‰ˆæœ¬æ›´æ–°çš„æ—¶å€™éœ€è¦ç‰ˆæœ¬æ™ºèƒ½æ›´æ–°(ä¸ç„¶ç”¨æˆ·è®¿é—®åˆ°çš„å¯èƒ½å°±æ˜¯æ—§çš„èµ„æº)ï¼Œå³å¯¹åº”çš„æ¨¡å—å†…å®¹å‘ç”Ÿæ”¹å˜æ—¶æ‰å»æ›´æ–°è¿™ä¸ªç‰ˆæœ¬å·ï¼Œè™½ç„¶å¯ä»¥é€šè¿‡ <code>js/[name].[chunkhash:7].js</code> è¿™æ ·çš„é…ç½®å®ç°ï¼Œä½†æ˜¯ CDN è®¿é—®åˆ°çš„é™æ€èµ„æºæ˜¯é€šè¿‡ git æ§åˆ¶ä¸Šçº¿çš„ï¼Œæ‰€ä»¥è¿™æ ·ç”Ÿæˆçš„é™æ€èµ„æºï¼Œæ–‡ä»¶åæ¯æ¬¡å¯èƒ½ä¸ä¸€æ ·ï¼Œè¿™æ ·å°±ä¼šè¶Šæ¥è¶Šå¤šï¼Œgit éœ€è¦å®šæ—¶æ¸…ç†ï¼Œæ¯”è¾ƒéº»çƒ¦ã€‚äºæ˜¯æ‰æœ‰äº†è¿™æ ·ä¸€ä¸ªä¸¤å…¨çš„æ–¹æ¡ˆï¼šæ—¢æ§åˆ¶äº†ç‰ˆæœ¬æ›´æ–°ï¼Œä¹Ÿè®©æ–‡ä»¶åä¸äº§ç”Ÿå˜åŠ¨ã€‚</p>
<p>å°±æ˜¯å¦‚ä¸‹é…ç½®ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  ...</span><br><span class="line">  build: &#123;</span><br><span class="line">    ...</span><br><span class="line">    filenames: &#123;</span><br><span class="line">      ...</span><br><span class="line">      chunk: <span class="string">'js/[name].js?v=[chunkhash:7]'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æƒ³æ³•å¾ˆä¸°æ»¡ï¼Œç°å®å¾ˆéª¨æ„Ÿï¼Œåœ¨ <code>nuxt.config.js</code> ä¸­ä½¿ç”¨è¿™æ ·çš„é…ç½®é™æ€åŒ–ç¼–è¯‘çš„æ—¶å€™ä¼šæŠ¥é”™ <code>Cannot find module &#39;pages_index.js?v=6f7b904...</code>ï¼Œ(âŠ™oâŠ™)â€¦ç»è¿‡ä¸€ç³»åˆ—çš„æºç è¿½è¸ªå‘ç°æ˜¯<code>vue-server-renderer</code> è¿™ä¸ªæ¨¡å—çš„ BUGã€‚</p>
<p>è™½ç„¶å‘å®˜æ–¹æäº†ç›¸å…³ issue ï¼Œä½†æ˜¯å› ä¸å¯æŠ—æ‹’çš„å› ç´ æš‚æ—¶æ— æ³•ä¿®å¤ã€‚</p>
<p><code>vue-server-renderer/server-plugin.js</code> 78è¡Œ <strong>asset.name.match(/.js$/)</strong> è¿™ä¸ªåˆ¤æ–­é‡Œçš„æ­£åˆ™æ˜æ˜¾æŠŠæˆ‘ä»¬è®¾å®šçš„æ ¼å¼ <code>js/[name].js?v=[chunkhash:7]</code> è¿‡æ»¤æ‰äº†ï¼Œä¸ä¼šèµ°è¿™ä¸ªåˆ¤æ–­ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦æƒ³åŠæ³•æŠŠè¿™ä¸ªåˆ¤æ–­æ¡ä»¶æ”¹ä¸€ä¸‹ï¼Œè®©å®ƒèµ°è¿™é‡Œã€‚å‘ç°ä»–åŒæ–‡ä»¶ä¸Šé¢æœ‰ä¸ª <code>isJS</code> å‡½æ•°ï¼Œè¿™æ ·å°±çœäº‹å¤šäº†ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è°ƒç”¨ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬å¦‚æœæ”¹æºç çš„è¯åªéœ€è¦æŠŠè¿™é‡Œ <strong>asset.name.match(/.js$/)</strong> æ›¿æ¢ä¸º <strong>isJS(asset.name)</strong> å°±è¡Œäº†ã€‚ä½†æ˜¯æ”¹æºç æ€»å½’ä¸å¥½ï¼Œå› ä¸ºå¹¶ä¸èƒ½ä¿è¯å›¢é˜Ÿå…¶ä»–æˆå‘˜çš„æœºå™¨ä¸Šæ¨¡å—åº“ä¸€è‡´ã€‚æŠ•æœºå–å·§ï¼Œæ—¢ç„¶ç›´æ¥ä¿®æ”¹ä¸å¥½ï¼Œé‚£å°±é—´æ¥ä¿®æ”¹å‘—ã€‚</p>
<p>å¼€å§‹åŠ¨æ‰‹ï¼Œå…ˆå®‰è£…ä¸€ä¸ª npm çš„æ¨¡å—ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install shelljs -D <span class="comment"># OR yarn add shelljs -D</span></span><br></pre></td></tr></table></figure></p>
<p>æ¥ç€åœ¨é¡¹ç›®ä¸‹æ–°å»ºä¸¤ä¸ªæ–‡ä»¶ï¼š</p>
<ul>
<li>build/nuxt-generate.jsï¼šç”¨æ¥æ‰§è¡Œé™æ€åŒ–çš„ä¸€äº›å‘½ä»¤</li>
<li>build/vue-server-renderer.patch.jsï¼šç»™ <code>vue-server-renderer</code> æ¨¡å—æ‰“è¡¥ä¸</li>
</ul>
<blockquote>
<p>build/nuxt-generate.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> shell = <span class="built_in">require</span>(<span class="string">'shelljs'</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; resolve &#125; = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> nuxt = resolve(__dirname, <span class="string">'../node_modules/.bin/nuxt'</span>)</span><br><span class="line"><span class="keyword">const</span> logProvider = <span class="built_in">require</span>(<span class="string">'consola'</span>).withScope(<span class="string">'nuxt:generate'</span>)</span><br><span class="line"></span><br><span class="line">shell.exec(<span class="string">`npm run patch`</span>, (code, stdout, stderr) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (code !== <span class="number">0</span>) &#123;</span><br><span class="line">    logProvider.error(stderr)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//- ä¸Šé¢çš„å‘½ä»¤æ‰§è¡ŒæˆåŠŸä¹‹ååœ¨æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤</span></span><br><span class="line">  shell.exec(<span class="string">`<span class="subst">$&#123;nuxt&#125;</span> generate`</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>build/vue-server-renderer.patch.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; resolve &#125; = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"><span class="keyword">const</span> SSRJSPath = resolve(__dirname, <span class="string">'../node_modules/vue-server-renderer/server-plugin.js'</span>)</span><br><span class="line"><span class="keyword">const</span> consola = <span class="built_in">require</span>(<span class="string">'consola'</span>)</span><br><span class="line"><span class="keyword">const</span> logProvider = consola.withScope(<span class="string">'vue:patch'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = VueSSRPatch()</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯¹ `vue-server-renderer/server-plugin.js` æºç å†…å®¹è¿›è¡Œæ›¿æ¢</span></span><br><span class="line"><span class="comment"> * asset.name.match(/\.js$/)</span></span><br><span class="line"><span class="comment"> * =&gt;</span></span><br><span class="line"><span class="comment"> * isJS(asset.name)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">VueSSRPatch</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//- æ£€æµ‹è¯¥æ¨¡å—æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">  <span class="keyword">if</span> (fs.existsSync(SSRJSPath)) &#123;</span><br><span class="line">    <span class="keyword">let</span> regexp = <span class="regexp">/asset\.name\.match\(\/\\\.js\$\/\)/</span></span><br><span class="line">    <span class="keyword">let</span> SSRJSContent = fs.readFileSync(SSRJSPath, <span class="string">'utf8'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//- æ£€æµ‹æ˜¯å¦å­˜åœ¨éœ€è¦æ›¿æ¢çš„å†…å®¹(é€šå¸¸æ˜¯æŒ‡è¯¥é¡¹ç›®åœ¨æœ¬æœºç¬¬ä¸€æ¬¡è¿è¡Œ)</span></span><br><span class="line">    <span class="keyword">if</span> (regexp.test(SSRJSContent)) &#123;</span><br><span class="line">      logProvider.start(<span class="string">`å‘ç°vue-server-rendereræ¨¡å—ï¼Œå¼€å§‹æ‰§è¡Œä¿®è¡¥æ“ä½œï¼`</span>)</span><br><span class="line"></span><br><span class="line">      SSRJSContent = SSRJSContent.replace(regexp, <span class="string">'isJS(asset.name)'</span>)</span><br><span class="line">      fs.writeFileSync(SSRJSPath, SSRJSContent, <span class="string">'utf8'</span>)</span><br><span class="line"></span><br><span class="line">      logProvider.ready(<span class="string">`ä¿®è¡¥å®Œæ¯•ï¼`</span>)</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    logProvider.warn(<span class="string">`è¯¥æ¨¡å—å·²ä¿®è¡¥è¿‡ï¼Œæ— éœ€å†æ¬¡ä¿®è¡¥ï¼Œå¯ç›´æ¥è¿è¡Œ\`npm run dev\` æˆ– \`npm run gen\``</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  logProvider.warn(<span class="string">`æœªå‘ç°è¯¥æ¨¡å—ï¼Œè·³å‡ºæœ¬æ¬¡ä¿®å¤ï¼`</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>æœ€ååœ¨ <code>package.json</code> ä¸­ <code>scripts</code> æ·»åŠ  <code>gen</code> å’Œ <code>patch</code> ä¸¤æ¡å‘½ä»¤ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">  <span class="string">"dev"</span>: <span class="string">"nuxt"</span>,</span><br><span class="line">  <span class="string">"generate"</span>: <span class="string">"nuxt generate"</span>,</span><br><span class="line">  <span class="string">"patch"</span>: <span class="string">"node build/vue-server-renderer.patch"</span>,</span><br><span class="line">  <span class="string">"gen"</span>: <span class="string">"node build/nuxt-generate"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>patch</strong>ï¼šæœ¬æœºç¬¬ä¸€æ¬¡è¿è¡Œæˆ–è€…æ›´æ–°ç›¸å…³æ¨¡å—(vue-server-renderer)æ—¶éœ€è¦æ‰§è¡Œä¸€æ¬¡ã€‚</p>
<p><strong>gen</strong>ï¼š<br><code>npm run patch</code> å’Œ <code>npm run generate</code> çš„åˆå¹¶å‘½ä»¤ï¼Œå°±æ˜¯è¯´ä¼šå…ˆåæ‰§è¡Œè¿™ä¸¤ä¸ªï¼Œæ–¹ä¾¿æœ¬æœºç¬¬ä¸€æ¬¡ä½¿ç”¨ã€‚å¦‚æœæœ¬æœºæ‰§è¡Œè¿‡ <code>npm run patch</code> å¯ç›´æ¥ <code>npm run generate</code>ï¼Œç”Ÿæˆç›¸å…³é™æ€é¡µã€‚</p>
<h3 id="æœ¬äººæ–‡ç¬”æ‹™åŠ£ï¼Œå¦‚æœ‰æè¿°ä¸å½“ï¼Œæ¬¢è¿å„è·¯å¤§ç¥æ‹ç –ï¼"><a href="#æœ¬äººæ–‡ç¬”æ‹™åŠ£ï¼Œå¦‚æœ‰æè¿°ä¸å½“ï¼Œæ¬¢è¿å„è·¯å¤§ç¥æ‹ç –ï¼" class="headerlink" title="æœ¬äººæ–‡ç¬”æ‹™åŠ£ï¼Œå¦‚æœ‰æè¿°ä¸å½“ï¼Œæ¬¢è¿å„è·¯å¤§ç¥æ‹ç –ï¼"></a>æœ¬äººæ–‡ç¬”æ‹™åŠ£ï¼Œå¦‚æœ‰æè¿°ä¸å½“ï¼Œæ¬¢è¿å„è·¯å¤§ç¥æ‹ç –ï¼</h3>
      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/10/27/åˆ©ç”¨Certbotå…è´¹å®ç°å…¨ç«™httpsåŒ–/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">&lt;</strong>
      <div class="article-nav-title">
        
          CentOS7.2ä¸‹åˆ©ç”¨Certbotå…è´¹å®ç°å…¨ç«™httpsåŒ–
        
      </div>
    </a>
  
  
    <a href="/2018/06/04/node-canvasçš„å®‰è£…ï¼Œnode-gypè¸©å‘è®°/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">node-canvasçš„å®‰è£…ï¼Œnode-gypè¸©å‘è®°</div>
      <strong class="article-nav-caption">&gt;</strong>
    </a>
  
</nav>

  
</article>


<div class="share">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">åˆ†äº«åˆ°ï¼š</span>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_qzone"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
		<a href="https://www.jiathis.com/share?uid=2120416" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript">
		var jiathis_config = {data_track_clickback:'true'};
	</script>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=2120416" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>



<div class="duoshuo">
	<!-- å¤šè¯´è¯„è®ºæ¡† start -->
	<div class="ds-thread" data-thread-key="Nuxt.jsè¸©å‘è®°ï¼Œåˆ©ç”¨Nuxtä¸€é”®ç”Ÿæˆå¤šé¡µé¢é™æ€ç«™ç‚¹" data-title="Nuxt.jsè¸©å‘è®°ï¼Œåˆ©ç”¨Nuxtä¸€é”®ç”Ÿæˆå¤šé¡µé¢é™æ€ç«™ç‚¹" data-url="https://songyazhao.github.io/2018/06/05/Nuxt.jsè¸©å‘è®°ï¼Œåˆ©ç”¨Nuxtä¸€é”®ç”Ÿæˆå¤šé¡µé¢é™æ€ç«™ç‚¹/"></div>
	<!-- å¤šè¯´è¯„è®ºæ¡† end -->
	<!-- å¤šè¯´å…¬å…±JSä»£ç  start (ä¸€ä¸ªç½‘é¡µåªéœ€æ’å…¥ä¸€æ¬¡) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"songyazhao"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0]
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- å¤šè¯´å…¬å…±JSä»£ç  end -->
</div>



</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
      <div class="footer-left">
        &copy; 2020 ç³–é†‹é‡Œè„Šå‰çƒ§åŒ…
      </div>
        <div class="footer-right">
          <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/winnerweb/hexo-Yilia-Smackdown" target="_blank">Yilia(Smackdown)</a>
        </div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="/js/main.js"></script>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js"></script>


  </div>
</body>
</html>
